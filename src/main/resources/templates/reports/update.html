<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <script src='https://cloud.tinymce.com/stable/tinymce.min.js'></script>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <script>
  tinymce.init({
    selector: '#mytextarea'
  });
  </script>
</head>

<body>
	    <div>
        <a href="/">Home</a>

        â€¢
    
        <a href="/reports">Reports</a>
    </div>
	<h1>Update Report</h1>
	<form action="#" th:action="@{'/reports/' + ${report.id}}" th:object="${report}" method="post">
		<label>
            Report Name*
            <br />
            <input type="text" th:field="*{name}" required />
        </label>

    	<textarea id="mytextarea" th:field="*{body}"></textarea>
  	
   	<input type="submit" value="Update" />
    <input type="reset" value="Reset" />
    <button class = "formBtn delBtn" type="button" th:onclick="@{'deleteReport(' + ${report.id} + ')'}">
          Delete
    </button>
        <script type="text/javascript">
          async function deleteReport(id) {
            const yes = confirm("Are you sure you want to delete the report? You cannot undo this action.");
            if (yes) {
              await fetch(`/reports/${id}`, { method: "DELETE" });
              window.location = '/reports';
            }
          }
        </script>
  	</form>

</body>
</html>